---
title: Object.is 方法的用法
description:
tags:
  - 'implementation'
---

### 描述

Object.is 方法用于判断两个值是否为相同的值。与严格等价比较（使用 === 运算符）非常相似，但是有两种特殊情况的处理不同：

- NaN 等于它自身（`NaN` 在严格等价比较下被认为是不等的）。
- +0 和 -0 被认为是不同的值（在严格等价比较下，`+0` 和 -0 被认为是相同的）。
  如果你的环境不支持 Object.is 方法（例如：在不支持ES6的旧环境中），你可以使用下面的polyfill方式来模拟这个方法。

### 代码

```js
if (!Object.is) {
  Object.defineProperty(Object, 'is', {
    value: function (x, y) {
      // 同一个值，直接返回 true
      if (x === y) {
        // 检查 +0 与 -0
        return x !== 0 || 1 / x === 1 / y;
      }
      // +x 是为了处理 x 是 NaN 的情况。NaN 与自身不相等
      return x !== x && y !== y;
    },
    configurable: true,
    enumerable: false,
    writable: true
  });
}

// 使用 Object.is
console.log(Object.is('foo', 'foo')); // true
console.log(Object.is(window, window)); // true
console.log(Object.is('foo', 'bar')); // false
console.log(Object.is([], [])); // false

console.log(Object.is(null, null)); // true
console.log(Object.is(0, -0)); // false
console.log(Object.is(-0, -0)); // true
console.log(Object.is(NaN, 0 / 0)); // true
```
